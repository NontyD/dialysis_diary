{% extends "pages/base.html" %}
{% block title %}My Calendar{% endblock %}

{% block content %}
<div class="container mt-4">
    <h2>My Calendar</h2>

    <!-- Calendar Container -->
    <div id="calendar"></div>

    <h3>Upcoming Events</h3>
    <ul>
        {% for event in events %}
            <li><strong>{{ event.title }}</strong> - {{ event.date|date:"Y-m-d H:i" }}</li>
        {% empty %}
            <li>No events yet.</li>
        {% endfor %}
    </ul>
</div>

<!-- Include FullCalendar CSS & JS -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/5.11.3/main.min.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/5.11.3/main.min.js"></script>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        var calendarEl = document.getElementById('calendar');

        var calendar = new FullCalendar.Calendar(calendarEl, {
            initialView: 'dayGridMonth',
            events: [
                {% for event in events %}
                {
                    title: "{{ event.title }}",
                    start: "{{ event.date|date:"Y-m-d\TH:i:s" }}",  // Format for FullCalendar
                },
                {% endfor %}
            ]
        });

        calendar.render();
    });
</script>

{% endblock %}
