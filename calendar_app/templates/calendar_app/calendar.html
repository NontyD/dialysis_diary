{% extends "pages/base.html" %}
{% block title %}My Calendar{% endblock %}

{% block content %}
<div class="container mt-4">
    <h2>My Events</h2>

    <!-- FullCalendar Container -->
    <div id="calendar"></div>

    <h3>Upcoming Events</h3>
    <ul>
        {% for event in events %}
            <li><strong>{{ event.title }}</strong> - {{ event.date }} </li>
        {% empty %}
            <li>No events yet.</li>
        {% endfor %}
    </ul>
</div>

<!-- Include FullCalendar JS & CSS -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/5.11.3/main.min.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/5.11.3/main.min.js"></script>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        var calendarEl = document.getElementById('calendar');
        var calendar = new FullCalendar.Calendar(calendarEl, {
            initialView: 'dayGridMonth',
            events: [
                {% for event in events %}
                {
                    title: "{{ event.title }}",
                    start: "{{ event.date.isoformat }}",
                },
                {% endfor %}
            ]
        });
        calendar.render();
    });
</script>

{% endblock %}
